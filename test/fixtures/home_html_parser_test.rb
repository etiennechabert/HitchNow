require 'test_helper'

class HomeHtmlParserTest < ActiveSupport::TestCase
    def get_file_content(file_name='base_home.html')
        f = File.open("test/fixtures/home_html/#{file_name}")
        r = Nokogiri::HTML(f)
        f.close
        r
    end

    def base_home_girls
        ["18385216", "17683816", "111463340", "111492399", "111045871", "19124786", "111104128", "19962975", "19839132", "11417369", "110121855", "17215258", "111237092", "1471512", "17702570", "17339581", "16483113", "17016707", "110923574", "18686197", "111457859", "15926375", "11896102", "15815056", "18925919", "19738549", "12457628", "111353339", "11209435", "18724357", "16995127", "11468083", "17095733", "18385768", "14993219", "19834290", "15684890", "110333929", "110801297", "111502831", "19048235", "111233289", "111477343", "11239017", "111441160", "12332079", "18680501", "19802191", "110026149", "13056164", "111004100", "111386057", "17258181", "19205103", "14114735", "19373772", "110158094", "19227391", "110291016", "111028403", "111452013", "18224274", "12654509", "16007370", "18479177", "111502195", "111263308", "111016077", "111422862", "111254117", "111482711", "14486515", "110748993", "17063338", "17453082", "18762288", "111476156", "15792425", "14138229", "110752489", "110891385", "111503051", "19167955", "18498515", "14993219", "19834290", "15684890", "110333929", "110801297", "111502831", "19048235", "111233289", "111477343", "11239017"]
    end

    test 'base home girls' do
        home_html_parser = HomeHtmlParser.new(get_file_content)
        assert_equal home_html_parser.analyse, base_home_girls
    end

end